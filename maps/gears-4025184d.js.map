{"version":3,"sources":["data-request-v0.0.0.js","dm-utils-v0.0.0.js","start-v0.0.0.js","editable-v0.0.0.js","gallery-v0.0.0.js","iframe-list-v0.0.0.js","login-v0.0.0.js","pages-v0.0.0.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"gears-4025184d.js","sourcesContent":["require.register('data-request/index', function(require, exports, module) {var request = require('utils/request');\n\nexports.getJson = function (jsonName, callback) {\n\trequest.get('/json/' + jsonName + '.json?_=' + new Date().getTime(), function (res) {\n\t\tif (res.status === 200) {\n\t\t\tvar json = JSON.parse(res.text);\n\t\t\tcallback(json);\n\t\t}\n\t});\n};\n\nexports.getTxt = function (txtName, callback) {\n\trequest.get('/txt/' + txtName + '.txt?_=' + new Date().getTime(), function (res) {\n\t\tif (res.status === 200) {\n\t\t\tcallback(res.text);\n\t\t}\n\t});\n};\n\nexports.get = request.get;\n});\nwindow.cogwheels.addFeature({name: \"data-request\", version: \"0.0.0\"});","require.register('dm-utils/index', function(require, exports, module) {exports.parseTextToItems = function (lines) {\n    var currentItem;\n    var items = [];\n    lines.split(/(?:\\r\\n|\\r|\\n)/g).forEach(function (line) {\n        if (line.trim().indexOf('#') === 0) {\n            currentItem = {\n                text: '',\n                id: line.trim().substr(1).trim()\n            };\n            items.push(currentItem);\n        }\n        else {\n            if (currentItem !== undefined) {\n                currentItem.text = currentItem.text + line + '\\n';\n            }\n        }\n    });\n    return items;\n};\n});\nwindow.cogwheels.addFeature({name: \"dm-utils\", version: \"0.0.0\"});","require.register('start/index', function(require, exports, module) {var router = require('router');\nvar pages = require('pages');\nvar bus = require('message-bus');\nvar webStorage = require('web-storage');\nvar currentPage;\n\nexports.start = function () {\n    var firstRender = true;\n    router.on('/', function (ctx) {\n            pages.render();\n            firstRender = false;\n        }\n    );\n    router.on('/:page', function (ctx) {\n            var page = ctx.params.page;\n            if (page.indexOf('#') === 0) {\n                page = page.substr(1);\n                if (!firstRender) {\n                    bus.publish('main-content', page);\n                } else {\n                    firstRender = false;\n                    pages.render(page);\n                }\n                webStorage.store('session', 'previousPage', currentPage);\n                currentPage = page;\n            }\n        }\n    );\n};\n\nexports.controllers = [];\n});\nwindow.cogwheels.addFeature({name: \"start\", version: \"0.0.0\"});","require.register('editable/index', function(require, exports, module) {var template = require('./template');\nvar viewModel = require('./view-model');\n\nexports.init = function () {\n    ko.components.register('editable', component);\n};\n\nvar component = {\n    viewModel: {\n        'createViewModel': viewModel.create\n    },\n    template: template\n};\n});\nrequire.register('editable/template', function(require, exports, module) {module.exports = \"<div data-bind=\\\"css: {'editBox': editMode}\\\"><div data-bind=\\\"visible: editMode()\\\" vertical layout><textarea data-bind=\\\"textInput: textToEdit\\\"></textarea><div class=\\\"marginTop\\\"><button data-bind=\\\"click: cancel\\\">ÅNGRA</button> <button data-bind=\\\"click: save\\\">SPARA</button></div></div><button data-bind=\\\"click: edit, visible: !editMode() && isLoggedIn()\\\">REDIGERA</button></div>\";\n});\nrequire.register('editable/view-model', function(require, exports, module) {var request = require('utils/request');\nvar login = require('login');\n\nvar viewModel = {\n    init: function (params) {\n        this.textToEdit = params.textToEdit;\n        this.fileName = params.fileName;\n        this.isLoggedIn = login.isLoggedIn;\n        this.editMode = params.editMode;\n    },\n\n    edit: function () {\n        if (login.isLoggedIn()) {\n            this.editMode(true);\n        }\n    },\n\n    cancel: function () {\n        this.editMode(false);\n    },\n\n    save: function () {\n        request.post(\"/admin/save.php?name=\" + this.fileName + \"&password=\" + login.getPassword(), this.textToEdit(), function (res) {\n            location.reload();\n        });\n    }\n};\n\n\nmodule.exports.create = function (params) {\n    var vm = Object.create(viewModel);\n    vm.init(params);\n    return vm;\n};\n\n});\nwindow.cogwheels.addFeature({name: \"editable\", version: \"0.0.0\"});","require.register('gallery/index', function(require, exports, module) {var template = require('./template');\nvar viewModel = require('./view-model');\n\nexports.init = function () {\n    ko.components.register('gallery', component);\n};\n\nvar component = {\n    viewModel: {\n        'createViewModel': viewModel.create\n    },\n    template: template\n};\n});\nrequire.register('gallery/template', function(require, exports, module) {module.exports = \"<div class=\\\"photos\\\"><div class=\\\"fotorama\\\" data-auto=\\\"false\\\" data-nav=\\\"thumbs\\\" data-bind=\\\"attr:{'data-width':width, 'data-height':height}\\\"></div></div>\";\n});\nrequire.register('gallery/view-model', function(require, exports, module) {var request = require('data-request');\n\nfunction setSize(obj) {\n    var mainContent = $('.mainContent');\n    obj.width = mainContent.width();\n    obj.height = mainContent.height() - 80;\n}\nvar viewModel = {\n    init: function (params) {\n        var self = this;\n        setSize(this);\n        request.getJson(params.jsonName, function (images) {\n            setTimeout(function () {\n                images.forEach(function (image) {\n                    image.caption = image.text;\n                    image.img = image.url;\n                    image.thumb = image.url;\n                    image.full = image.url;\n                });\n                var fotorama = $('.fotorama').fotorama({\n                    data: images,\n                    allowfullscreen: true,\n                    autoplay: '5000',\n                    loop: true,\n                    arrows: 'always',\n                    shuffle: true\n                });\n                $(window).resize(function () {\n                    var resize = {};\n                    setSize(resize);\n                    fotorama.resize(resize);\n                });\n            }, 0);\n        });\n    }\n};\n\n\nmodule.exports.create = function (params) {\n    var vm = Object.create(viewModel);\n    vm.init(params);\n    return vm;\n};\n\n});\nwindow.cogwheels.addFeature({name: \"gallery\", version: \"0.0.0\"});","require.register('iframe-list/index', function(require, exports, module) {var template = require('./template');\nvar viewModel = require('./view-model');\n\nexports.init = function () {\n    ko.components.register('iframe-list', component);\n};\n\nvar component = {\n    viewModel: {\n        'createViewModel': viewModel.create\n    },\n    template: template\n};\n});\nrequire.register('iframe-list/template', function(require, exports, module) {module.exports = \"<div data-bind=\\\"foreach: items, css: iframeListClass\\\"><div class=\\\"card\\\" data-bind=\\\"style: {width: width}\\\"><div class=\\\"iFrameTitle\\\" data-bind=\\\"text: title\\\"></div><div z=\\\"2\\\" style=\\\"background-size: 100%\\\" data-bind=\\\"style: {backgroundImage: image, width: width, height: height}\\\"><div data-bind=\\\"click: $parent.click, css: $parent.playIconClass\\\"><div class=\\\"replaceMe\\\"></div></div></div></div></div>\";\n});\nrequire.register('iframe-list/view-model', function(require, exports, module) {var viewModel = {\n    init: function (params) {\n        this.playIconClass = 'play ' + params.playIconClass;\n        this.items = params.items;\n        this.click = showIFrame;\n        this.iframeListClass = params.iframeListClass || 'lazyIFrames';\n    }\n};\n\nfunction showIFrame(item, event) {\n    var element = event.currentTarget;\n    var iframe = document.createElement('iframe');\n    var iframeUrl = item.iFrameUrl;\n    if (element.getAttribute('data-params')) {\n        iframeUrl += '&' + element.getAttribute('data-params');\n    }\n    iframe.setAttribute('src', iframeUrl);\n    iframe.setAttribute('frameborder', '0');\n    if (item.fill) {\n        iframe.style.width = element.parentElement.style.width;\n        iframe.style.height = element.parentElement.style.height;\n    } else {\n        iframe.style.display = 'block';\n    }\n    element.replaceChild(iframe, element.querySelector('.replaceMe'));\n    element.className = 'play';\n}\n\nmodule.exports.create = function (params) {\n    var vm = Object.create(viewModel);\n    vm.init(params);\n    return vm;\n};\n\n});\nwindow.cogwheels.addFeature({name: \"iframe-list\", version: \"0.0.0\"});","require.register('login/index', function(require, exports, module) {var template = require('./template');\nvar viewModel = require('./view-model');\nvar webStorage = require('web-storage');\n\nexports.init = function () {\n    ko.components.register('login', component);\n};\n\nexports.isLoggedIn = function() {\n    return exports.getPassword() !== undefined;\n};\n\nexports.getPassword = function() {\n    return webStorage.retrieve('session', 'password');\n};\n\nexports.logout = function() {\n    webStorage.clear('session', 'password');\n    location.reload();\n};\n\nvar component = {\n    viewModel: {\n        'createViewModel': viewModel.create\n    },\n    template: template\n};\n});\nrequire.register('login/template', function(require, exports, module) {module.exports = \"<div class=\\\"login\\\"><label for=\\\"password\\\">Lösenord</label><input id=\\\"password\\\" type=\\\"password\\\" autofocus data-bind=\\\"textInput: password, event: {keypress: submit}, css: {'redBackground': unauthorized}\\\"> <button class=\\\"marginTop\\\" data-bind=\\\"click: login\\\">LOGGA IN</button></div>\";\n});\nrequire.register('login/view-model', function(require, exports, module) {var request = require('data-request');\nvar router = require('router');\nvar webStorage = require('web-storage');\n\nvar viewModel = {\n    init: function () {\n        this.password = ko.observable();\n        this.unauthorized = ko.observable(false);\n    },\n\n    login: function () {\n        var self = this;\n        request.get('/admin/login.php?password=' + this.password(), handleLoginResponse.bind(this));\n    },\n\n    submit: function (d, e) {\n        e.keyCode === 13 && this.login();\n        return true;\n    }\n};\n\nfunction handleLoginResponse(res) {\n    this.unauthorized(res.unauthorized);\n    if (!res.unauthorized) {\n        webStorage.store('session', 'password', this.password());\n        var prevPage = webStorage.retrieve('session', 'previousPage');\n        router.navigate('/#' + prevPage);\n        location.reload();\n    }\n}\n\nmodule.exports.create = function () {\n    var vm = Object.create(viewModel);\n    vm.init();\n    return vm;\n};\n\n});\nwindow.cogwheels.addFeature({name: \"login\", version: \"0.0.0\"});","require.register('pages/index', function(require, exports, module) {var layoutEngine = require('layout-engine');\nvar template = require('./template');\nvar viewModel = require('./view-model').create();\nvar request = require('data-request');\n\nvar urlPage;\n\nexports.init = function () {\n    request.getJson('menu', function (sections) {\n        sections.forEach(function (section) {\n            if (!section.header) {\n                var name = section.id || section.text.toLowerCase();\n                if (section.category) {\n                    name = section.category + '/' + name;\n                }\n                var component = {\n                    viewModel: {\n                        'createViewModel': function () {\n                            var viewModel = require('./' + name + '/view-model');\n                            var vm = Object.create(viewModel);\n                            vm.init();\n                            return vm;\n                        }\n                    },\n                    template: require('./' + name + '/template')\n                };\n                ko.components.register(name, component);\n            }\n        });\n        viewModel.createSections(urlPage);\n    });\n};\n\nexports.render = function (page) {\n    urlPage = page;\n    layoutEngine.render(template, viewModel, 'site');\n};\n});\nrequire.register('pages/template', function(require, exports, module) {module.exports = \"<div class=\\\"main\\\"><div class=\\\"navbar navbar-default navbar-fixed-top\\\" role=\\\"navigation\\\"><img id=\\\"loggedInLogo\\\" src=\\\"img/guitar-burning.gif\\\" data-bind=\\\"visible: loggedIn\\\"><div class=\\\"container\\\"><div class=\\\"navbar-header\\\"><button type=\\\"button\\\" class=\\\"navbar-toggle animated rollIn\\\" data-toggle=\\\"offcanvas\\\" data-target=\\\".sidebar-nav\\\"><span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span> <span class=\\\"icon-bar\\\"></span></button> <img class=\\\"drawerPhoto\\\" src=\\\"/img/drawer_photo.jpg\\\"> <img class=\\\"logo\\\" src=\\\"/img/logo.png\\\"></div></div></div><div class=\\\"container\\\"><div class=\\\"row row-offcanvas row-offcanvas-left\\\"><div class=\\\"col-xs-6 col-sm-2 sidebar-offcanvas\\\" id=\\\"sidebar\\\" role=\\\"navigation\\\"><ul class=\\\"nav\\\" data-bind=\\\"foreach: sections\\\"><li class=\\\"item\\\" data-bind=\\\"css: {'item-selected' : selected(), 'animated flash': initPage(), 'menu-header': header}\\\"><div data-bind=\\\"click: select, text:text\\\"></div></li></ul></div><div class=\\\"col-xs-12 col-sm-10 mainContent\\\" data-bind=\\\"if: mainContent()\\\"><div data-bind=\\\"component: {name: mainContent}\\\"></div></div></div></div></div>\";\n});\nrequire.register('pages/view-model', function(require, exports, module) {var bus = require('message-bus');\nvar request = require('data-request');\nvar router = require('router');\nvar login = require('login');\n\nvar viewModel = {\n    init: function () {\n        var self = this;\n        self.mainContent = ko.observable('');\n        self.sections = ko.observableArray();\n        self.loggedIn = login.isLoggedIn();\n        bus.subscribe('main-content', function (item) {\n            var section = item.data.toLowerCase();\n            self.mainContent(section.replace('-','/'));\n        });\n    },\n    createSections: function (selected) {\n        var self = this;\n        request.getJson('menu', function (sections) {\n            sections.forEach(function (section, index) {\n                if (!section.hidden) {\n                    section.initPage = ko.observable(false);\n                section.header = section.header || false;\n                section.id = section.id || section.text.toLowerCase();\n                    if (section.category) {\n                        section.id = section.category + '-' + section.id;\n                    }\n                section.selected = ko.computed(function () {\n                    return section.id === self.mainContent();\n                });\n                section.select = function () {\n                    if (!section.header) {\n                        router.navigate('/#' + section.id);\n                        document.querySelector('#sidebar').parentElement.className = 'row row-offcanvas row-offcanvas-left';\n                    }\n                };\n                if (!selected) {\n                    if (section.startPage) {\n                        section.select();\n                        section.initPage(true);\n                    }\n                }\n                self.sections.push(section);\n                }\n            });\n            if (selected)  {\n                bus.publish('main-content', selected);\n            }\n        });\n    }\n};\n\n\nmodule.exports.create = function () {\n    var vm = Object.create(viewModel);\n    vm.init();\n    return vm;\n};\n\n});\nrequire.register('pages/hem_160510/template', function(require, exports, module) {module.exports = \"<div><p><b>David släpper nytt!</b></p><p>Äntligen kommer det ny musik från David Miles. 13/5 släpps videon till <i>När mitt hjärta stod i brand</i>. 3 dagar senare finns singeln på Spotify, iTunes mm.</p><div center-justified><paper-shadow z=\\\"1\\\" class=\\\"card homeImage\\\"><img src=\\\"/img/nar_mitt_hjarta_stod_i_brand-1.jpg\\\"></paper-shadow></div></div>\";\n});\nrequire.register('pages/hem_160510/view-model', function(require, exports, module) {var bus = require('message-bus');\n\nmodule.exports = {\n    init: function () {\n\n    }\n\n};\n});\nrequire.register('pages/hem_160513/template', function(require, exports, module) {module.exports = \"<div><p><b>David släpper nytt!</b></p><p>Nu finns Davids nya singel <i>När mitt hjärta stod i brand</i> ute. Här kan du se videon.</p><iframe-list params=\\\"items:videos, playIconClass: 'youtube', iframeListClass:'textLeft'\\\"></iframe-list><p>Den 16/5 släpps låten på Spotify, iTunes mm.</p><p>1/6 kommer andra singeln <i>Sanningen</i> ut.</p></div>\";\n});\nrequire.register('pages/hem_160513/view-model', function(require, exports, module) {var request = require('utils/request');\nvar apiKey = 'AIzaSyBKplqq_V9dmIO1y8oD73kaj5rwnRSS_d4';\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        this.videos = ko.observableArray();\n        var id = 'u05Hcpy6ixs';\n        var video = {\n            id: id,\n            iFrameUrl: 'https://www.youtube.com/embed/' + id + '?autoplay=1&autohide=1&origin=http://davidmiles.se',\n            image: 'url(http://i.ytimg.com/vi/' + id + '/mqdefault.jpg)',\n            title: ko.observable(),\n            width: '320px',\n            height: '180px',\n            fill: true\n        };\n        request('GET', 'https://www.googleapis.com/youtube/v3/videos?key=' + apiKey +\n            '&fields=items(snippet(title))&part=snippet&id=' + video.id).end(function (result) {\n            video.title(result.body.items[0].snippet.title);\n        });\n        self.videos([video]);\n\n    }\n};\n\n});\nrequire.register('pages/hem_160516/template', function(require, exports, module) {module.exports = \"<div><p><b>David släpper nytt!</b></p><p>Nu finns Davids nya singel <i>När mitt hjärta stod i brand</i> ute.</p><p>Här kan du se videon:</p><iframe-list params=\\\"items:videos, playIconClass: 'youtube', iframeListClass:'textLeft'\\\"></iframe-list><p>Lyssna på låten på Spotify:<div style=\\\"border:1px solid lightgray;cursor: pointer; background: url('/img/nar_mitt_hjarta_stod_i_brand-small.jpg');width: 100px;height: 100px;position: relative\\\" data-bind=\\\"click: click\\\"><img src=\\\"/img/spotify-icon.png\\\" width=\\\"15\\\" height=\\\"15\\\" style=\\\"position: absolute; right: 0; bottom: 0\\\"></div></p><p>Eller på iTunes:</p><a href=\\\"https://geo.itunes.apple.com/us/album/nar-mitt-hjarta-stod-i-brand/id1110999648?mt=1&app=music\\\" style=\\\"display:inline-block;overflow:hidden;background:url(https://linkmaker.itunes.apple.com/images/badges/en-us/badge_music-lrg.svg) no-repeat;width:165px;height:40px\\\"></a><p>1/6 kommer andra singeln <i>Sanningen</i> ut.</p></div>\";\n});\nrequire.register('pages/hem_160516/view-model', function(require, exports, module) {var request = require('utils/request');\nvar apiKey = 'AIzaSyBKplqq_V9dmIO1y8oD73kaj5rwnRSS_d4';\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        this.videos = ko.observableArray();\n        var id = 'u05Hcpy6ixs';\n        var video = {\n            id: id,\n            iFrameUrl: 'https://www.youtube.com/embed/' + id + '?autoplay=1&autohide=1&origin=http://davidmiles.se',\n            image: 'url(http://i.ytimg.com/vi/' + id + '/mqdefault.jpg)',\n            title: '',\n            width: '320px',\n            height: '180px',\n            fill: true\n        };\n        self.videos([video]);\n\n    },\n    click: function() {\n        window.location.href='https://open.spotify.com/track/3u4Z8W600ugcCeHijyykBE';\n    }\n};\n\n});\nrequire.register('pages/hem_160601/template', function(require, exports, module) {module.exports = \"<div><p><b>David släpper nytt!</b></p><p>Nu finns Davids nya singlar <i>När mitt hjärta stod i brand</i> och <i>Sanningen</i> ute.</p><p>Lyssna på låtarna på Spotify:</p><ul><li><a href=\\\"https://open.spotify.com/track/3u4Z8W600ugcCeHijyykBE\\\">När mitt hjärta stod i brand</a></li><li><a href=\\\"https://open.spotify.com/track/4rpnE60gMwM1bvciBQ4mxr\\\">Sanningen</a></li></ul><p>Eller på iTunes:</p><ul><li><a href=\\\"https://itunes.apple.com/se/album/nar-mitt-hjarta-stod-i-brand/id1110999648\\\">När mitt hjärta stod i brand</a></li><li><a href=\\\"https://itunes.apple.com/se/album/sanningen-single/id1116592289\\\">Sanningen</a></li></ul><p>Här kan du se videon för <i>När mitt hjärta stod i brand</i>:</p><iframe-list params=\\\"items:videos, playIconClass: 'youtube', iframeListClass:'textLeft'\\\"></iframe-list></div>\";\n});\nrequire.register('pages/hem_160601/view-model', function(require, exports, module) {var request = require('utils/request');\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        this.videos = ko.observableArray();\n        var id = 'u05Hcpy6ixs';\n        var video = {\n            id: id,\n            iFrameUrl: 'https://www.youtube.com/embed/' + id + '?autoplay=1&autohide=1&origin=http://davidmiles.se',\n            image: 'url(https://i.ytimg.com/vi/' + id + '/mqdefault.jpg)',\n            title: '',\n            width: '320px',\n            height: '180px',\n            fill: true\n        };\n        self.videos([video]);\n\n    },\n    click: function() {\n        window.location.href='https://open.spotify.com/track/3u4Z8W600ugcCeHijyykBE';\n    }\n};\n\n});\nrequire.register('pages/hem_171022/template', function(require, exports, module) {module.exports = \"<div><p>Välkommen till David Miles hemsida. Här finns det mesta som är kopplat till Davids musik. Under spelplanen kan ni hitta var och när David spelar nästa gång.</p><div center-justified><paper-shadow z=\\\"1\\\" class=\\\"card homeImage\\\"><img src=\\\"/img/nar_mitt_hjarta_stod_i_brand-1.jpg\\\"></paper-shadow></div></div>\";\n});\nrequire.register('pages/hem_171022/view-model', function(require, exports, module) {module.exports = {\n    init: function () {\n\n    }\n};\n\n});\nrequire.register('pages/kontakt/template', function(require, exports, module) {module.exports = \"<div><div class=\\\"marginBottom\\\">Kontakta David Miles på<div>E-post: <a href=\\\"mailto:david@davidmiles.se\\\">david@davidmiles.se</a></div><div>Telefon: <a href=\\\"tel:0706-979604\\\">0706-979604</a></div></div><paper-shadow z=\\\"1\\\" class=\\\"contactImage\\\"><img src=\\\"img/press/david_press_18.jpg\\\"></paper-shadow><div class=\\\"marginBottom\\\" vertical layout>Kontakta skivbolag på <a href=\\\"http://www.hansarenmusik.se\\\" target=\\\"_blank\\\">www.hansarenmusik.se</a></div><div horizontal layout class=\\\"marginBottom\\\"><div>Sidan är skapad av</div><a class=\\\"spaced\\\" href=\\\"https://se.linkedin.com/in/johanfrick\\\">Johan Frick</a></div><div horizontal layout><div>Administatör:</div><a class=\\\"spaced\\\" href=\\\"\\\" data-bind=\\\"click: login, visible: !isLoggedIn()\\\">Logga in</a> <a class=\\\"spaced\\\" href=\\\"\\\" data-bind=\\\"click: logout, visible: isLoggedIn()\\\">Logga ut</a></div></div>\";\n});\nrequire.register('pages/kontakt/view-model', function(require, exports, module) {var router = require('router');\nvar login = require('login');\n\nmodule.exports = {\n    init: function () {\n        this.isLoggedIn = login.isLoggedIn;\n    },\n\n    login: function () {\n        router.navigate('/#login');\n    },\n\n    logout: function () {\n        login.logout();\n    }\n};\n});\nrequire.register('pages/om/template', function(require, exports, module) {module.exports = \"<div><p>David Miles är en låtskrivare, gitarrist och sångare uppvuxen i Göteborg men numera bosatt i Malmö. Han har gett ut 3 skivor sedan 2008. Den senaste skivan <a href=\\\"http://open.spotify.com/album/5nrPJLz8D9BAwBkUYyISWi\\\">Tiden är ett jetplan</a> gavs ut hösten 2012.</p><p>2011 hade David en radiohit med låten <a href=\\\"http://open.spotify.com/album/5RyzFjnNSYWYHdP5Nn9SDp\\\">Det är bara så det är</a>.</p><p>Många krogar, restauranger, eventbolag mm bokar David som trubadur. Efter flera år som flitig underhållare på uteserveringar och pubar runt om i landet är han med sitt genuina och äkta sound alltid mycket omtyckt.</p><p>David medverkar även i <a href=\\\"\\\" data-bind=\\\"click:goToPodcast\\\">podcasten Sjöwall & Miles</a> där det släpps ett nytt avsnitt ungefär en gång i månaden.</p><div center-justified><paper-shadow z=\\\"1\\\" class=\\\"card homeImage\\\"><img src=\\\"/img/spelplan.jpg\\\"></paper-shadow><paper-shadow z=\\\"1\\\" class=\\\"card homeImage\\\"><img src=\\\"/img/press/david_press_7_medium.jpg\\\"></paper-shadow></div><div class=\\\"musicServices\\\" horizontal center-justified layout><a href=\\\"http://www.facebook.com/pages/David-Miles/155341767874341\\\" target=\\\"_blank\\\"><img src=\\\"img/facebook.jpeg\\\" border=\\\"0\\\"></a> <a href=\\\"http://open.spotify.com/artist/4z4NwEHgD7Ykjs1L0gsKCI\\\" target=\\\"_blank\\\"><img src=\\\"img/spotify-logo-32x32-no-tagline.png\\\" border=\\\"0\\\"></a> <a href=\\\"https://itunes.apple.com/us/artist/david-miles/id304549972\\\" target=\\\"_blank\\\"><img src=\\\"img/itunes.png\\\" border=\\\"0\\\"></a></div></div>\";\n});\nrequire.register('pages/om/view-model', function(require, exports, module) {var bus = require('message-bus');\n\nmodule.exports = {\n    init: function () {\n\n    },\n    goToTrubadur: function() {\n        bus.publish('main-content', 'info-trubadur');\n    },\n    goToPodcast: function() {\n        bus.publish('main-content', 'podcast');\n    }\n\n};\n});\nrequire.register('pages/podcast/template', function(require, exports, module) {module.exports = \"<img class=\\\"max100\\\" src=\\\"/img/podcast.jpg\\\"><div class=\\\"podcasts\\\"><div class=\\\"animated fadeIn\\\" data-bind=\\\"if:podcasts().length === 0\\\">Inga podcasts tillgängliga</div><div data-bind=\\\"foreach: podcasts\\\"><div class=\\\"animated fadeIn\\\"><a href=\\\"\\\" data-bind=\\\"attr:{href: url}, text: title\\\" target=\\\"_blank\\\"></a></div></div></div>\";\n});\nrequire.register('pages/podcast/view-model', function(require, exports, module) {var request = require('data-request');\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        this.podcasts = ko.observableArray([{title: 'Läser in podcast-listan...', url: ''}]);\n        request.getJson('podcast', function (podcasts) {\n            podcasts.forEach(function (podcast) {\n                podcast.url = 'http://sjowallmiles.podomatic.com/entry/' + podcast.podomaticId;\n            });\n            self.podcasts(podcasts);\n        });\n    }\n};\n\n});\nrequire.register('pages/spelplan/template', function(require, exports, module) {module.exports = \"<img src=\\\"/img/spelplan.jpg\\\" class=\\\"card floatRight halfWidth\\\" data-bind=\\\"visible: !editMode()\\\"><div data-bind=\\\"visible:loading\\\" class=\\\"animated fadeIn\\\">Läser in spelplanen...</div><!--ko if: !loading()--><editable params=\\\"fileName: 'spelplan', textToEdit: gigs, editMode: editMode\\\"></editable><div class=\\\"animated fadeIn\\\" data-bind=\\\"visible: !editMode()\\\"><div class=\\\"marginBottom bigger\\\" data-bind=\\\"with: first\\\"><div class=\\\"red\\\">Nästa spelning <span data-bind=\\\"text: distance\\\"></span></div><div>Datum: <span data-bind=\\\"text: date\\\"></span></div><div>Plats: <span data-bind=\\\"text: place\\\"></span></div></div><div class=\\\"red\\\">Kommande</div><div data-bind=\\\"if:upcoming().length === 0\\\">Inga spelningar inbokade</div><div class=\\\"marginBottom\\\" data-bind=\\\"foreach: upcoming\\\"><div><span class=\\\"bold\\\" data-bind=\\\"text: date\\\"></span> <span data-bind=\\\"text: place\\\"></span></div></div><div data-bind=\\\"if:history().length > 0\\\"><div class=\\\"red\\\">Tidigare</div><div data-bind=\\\"foreach: history\\\"><div><span class=\\\"bold\\\" data-bind=\\\"text: date\\\"></span> <span data-bind=\\\"text: place\\\"></span></div></div></div></div><!--/ko-->\";\n});\nrequire.register('pages/spelplan/view-model', function(require, exports, module) {var request = require('data-request');\nvar router = require('router');\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        this.first = ko.observable();\n        this.upcoming = ko.observableArray();\n        this.history = ko.observableArray();\n        this.loading = ko.observable(true);\n        this.editMode = ko.observable(false);\n        this.gigs = ko.observable();\n        request.getTxt('spelplan', function (gigs) {\n            self.loading(false);\n            self.gigs(gigs);\n            var now = new Date();\n            now.setHours(0, 0, 0, 0);\n            var upcoming = [];\n            gigs.split('\\n').forEach(function (line) {\n                var gig = {};\n                gig.date = parseDate(line);\n                if (gig.date) {\n                    gig.place = line.replace(gig.date, '');\n                    gig.dateObject = new Date(gig.date);\n                    gig.dateObject.setHours(0, 0, 0, 0);\n                    if (now <= gig.dateObject) {\n                        upcoming.push(gig);\n                    } else {\n                        self.history.unshift(gig);\n                    }\n                }\n            });\n            upcoming.sort(function(a,b) {\n                return a.dateObject - b.dateObject;\n            });\n            var first = upcoming[0];\n            var diff = dayDiff(now, first.dateObject);\n            if (diff === 0) {\n                first.distance = 'är idag!';\n            } else {\n                first.distance = 'är om ' + diff + ' dagar';\n            }\n            self.first(first);\n            self.upcoming(upcoming);\n        });\n\n    }\n};\n\nfunction dayDiff(first, second) {\n    return parseInt((second - first) / (1000 * 60 * 60 * 24));\n}\n\nfunction parseDate(line) {\n    var matches = line.match(/\\d\\d\\d\\d-\\d\\d-\\d\\d( \\d\\d?:\\d\\d)?/);\n    if (matches && matches.length) {\n        var gig = {};\n        return matches[0];\n    }\n    return undefined;\n}\n});\nrequire.register('pages/artist/bilder/template', function(require, exports, module) {module.exports = \"<gallery params=\\\"jsonName: 'bilder-artist'\\\"></gallery>\";\n});\nrequire.register('pages/artist/bilder/view-model', function(require, exports, module) {module.exports = {\n    init: function () {\n    }\n};\n\n});\nrequire.register('pages/artist/discografi/template', function(require, exports, module) {module.exports = \"<div data-bind=\\\"visible:loading\\\" class=\\\"animated fadeIn\\\">Läser in album...</div><!--ko if: !loading()--><div data-bind=\\\"if: albums().length === 0\\\">Inga album upplagda för tillfället. Återkom gärna senare!</div><div data-bind=\\\"foreach: albums\\\"><div class=\\\"card discography animated fadeIn\\\" data-bind=\\\"if: hasImage\\\"><div class=\\\"discoInfo\\\"><div class=\\\"discoYear\\\" data-bind=\\\"text: date\\\"></div><div horizontal layout justified><div class=\\\"discoTitle\\\" data-bind=\\\"text: title\\\"></div><div class=\\\"discoTrackCount\\\"><span data-bind=\\\"text: trackCount() + ' spår'\\\"></span></div></div></div><div style=\\\"background-size: 100%\\\" data-bind=\\\"style: {backgroundImage: image, width: width, height: height}\\\"></div><div class=\\\"discoLinks\\\" horizontal end-justified layout center><a href=\\\"\\\" target=\\\"_blank\\\" data-bind=\\\"visible: shopUrl, attr:{href: shopUrl}\\\"><img class=\\\"shoppingCart\\\" src=\\\"img/shopping-cart.png\\\" border=\\\"0\\\"></a> <a href=\\\"\\\" target=\\\"_blank\\\" data-bind=\\\"attr:{href: iTunesUrl}\\\"><img src=\\\"img/itunes.png\\\" border=\\\"0\\\"></a> <a href=\\\"\\\" target=\\\"_blank\\\" data-bind=\\\"attr:{href: spotifyUrl}\\\"><img src=\\\"img/spotify-logo-32x32-no-tagline.png\\\" border=\\\"0\\\"></a></div></div></div><!--/ko-->\";\n});\nrequire.register('pages/artist/discografi/view-model', function(require, exports, module) {var request = require('data-request');\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        self.albums = ko.observableArray();\n        this.loading = ko.observable(true);\n        request.getJson('spotify_albums', function (albums) {\n            self.loading(false);\n            albums.forEach(function (album) {\n                album.spotifyUrl = 'http://open.spotify.com/album/' + album.spotifyId;\n                album.iTunesUrl = 'https://itunes.apple.com/us/album/' + album.iTunesId;\n                album.shopUrl = album.shopId ? 'http://davidmiles.tictail.com/product/' + album.shopId : false;\n                album.title = ko.observable();\n                album.date = ko.observable();\n                album.trackCount = ko.observable();\n                album.image = ko.observable();\n                album.width = '250px';\n                album.height = '250px';\n                album.hasImage = ko.computed(function() {\n                    return album.image() !== undefined;\n                });\n                request.get('https://api.spotify.com/v1/albums/' + album.spotifyId, function (result) {\n                    if (!result.body.error) {\n                        var images = result.body.images;\n                        album.title(result.body.name);\n                        album.date(result.body['release_date'].replace(/-.*/, ''));\n                        album.trackCount(result.body.tracks.items.length);\n                        images.forEach(function (image) {\n                            if (image.height === 300) {\n                                album.image('url(' + image.url + ')');\n                            }\n                        });\n                    } else {\n                        self.albums.remove(album);\n                    }\n                });\n                self.albums.push(album);\n            });\n        });\n    }\n};\n});\nrequire.register('pages/artist/press/template', function(require, exports, module) {module.exports = \"<div vertical layout center><b>Pressmeddelande</b> <a href=\\\"/img/130607_davidmiles.se_pressmeddelande.pdf\\\" target=\\\"_blank\\\">2013-06-07 David Miles Konserter sommaren 2013</a> <a href=\\\"/img/121016_davidmiles.se_pressmeddelande.pdf\\\" target=\\\"_blank\\\">2012-10-16 David Miles släpper nya skivan Tiden är ett jetplan!</a> <a href=\\\"/img/120625_davidmiles.se_pressmeddelande.pdf\\\" target=\\\"_blank\\\">2012-06-25 David Miles ger ut ny skiva hösten 2012!</a> <b class=\\\"pressImages\\\">Affisch (PDF)</b><div data-bind=\\\"foreach: posters\\\"><paper-shadow z=\\\"2\\\" class=\\\"card\\\"><a data-bind=\\\"attr: {href: url}\\\"><img data-bind=\\\"attr: {src: thumb}\\\"></a></paper-shadow></div><b class=\\\"pressImages\\\">Pressbilder</b><div data-bind=\\\"foreach: press\\\"><paper-shadow z=\\\"2\\\" class=\\\"card\\\"><a data-bind=\\\"attr: {href: url, 'data-title': downloadLink}\\\" data-lightbox=\\\"image-1\\\" data-title=\\\"\\\"><img data-bind=\\\"attr: {src: thumb}\\\"></a></paper-shadow></div></div>\";\n});\nrequire.register('pages/artist/press/view-model', function(require, exports, module) {module.exports = {\n    init: function () {\n        var images = [];\n        for (var i = 1; i <= 22; i++) {\n            var fullUrl = 'img/press/david_press_' + i + '.jpg';\n            images.push(\n                {\n                    thumb: 'img/press/david_press_' + i + '_thumbnail.jpg',\n                    url: fullUrl,\n                    downloadLink: '<a href=\"' + fullUrl + '\" target=\"_blank\">Klicka här för att ladda ner</a>'\n                }\n            );\n        }\n        this.press = images;\n\n        this.posters = [\n            {\n                thumb: 'img/affisch/david_miles_A3.jpg',\n                url: 'img/affisch/david_miles_A3.pdf'\n            }\n        ];\n    }\n};\n});\nrequire.register('pages/artist/recensioner/template', function(require, exports, module) {module.exports = \"<div class=\\\"reviews\\\" data-bind=\\\"foreach: items\\\"><!--ko if: hasImage--><img class=\\\"reviewAlbums\\\" src=\\\"\\\" data-bind=\\\"attr: {src: albumImage}\\\"><!--/ko--><!--ko if: hasText --><div><a href=\\\"\\\" target=\\\"_blank\\\" data-bind=\\\"attr: {href: link}, text: text\\\"></a></div><!--/ko--></div>\";\n});\nrequire.register('pages/artist/recensioner/view-model', function(require, exports, module) {var request = require('data-request');\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        this.items = ko.observableArray();\n        request.getJson('recensioner', function (items) {\n            items.forEach(function(item) {\n                item.hasImage = item.albumImage !== undefined;\n                item.hasText = item.text !== undefined;\n            });\n            self.items(items);\n        });\n    }\n};\n});\nrequire.register('pages/artist/shop/template', function(require, exports, module) {module.exports = \"Shoppen öppnas i ett nytt fönster. <a href=\\\"http://davidmiles.tictail.com/\\\">Klicka här</a> för att öppna den igen.\";\n});\nrequire.register('pages/artist/shop/view-model', function(require, exports, module) {module.exports = {\n    init: function () {\n        var win = window.open('http://davidmiles.tictail.com/', '_blank');\n        win.focus();\n    }\n};\n});\nrequire.register('pages/artist/texter/template', function(require, exports, module) {module.exports = \"<editable params=\\\"fileName: 'lyrics', textToEdit: allTexts, editMode: editMode\\\"></editable><div data-bind=\\\"foreach: lyrics, visible: !editMode()\\\"><div class=\\\"animated fadeIn\\\"><a href=\\\"\\\" data-bind=\\\"text: id, click: click, css: {'bold animated pulse': selected()}\\\"></a></div><div class=\\\"hiddenLyrics\\\" data-bind=\\\"html: text, css: {'visibleLyrics': selected}\\\"></div></div>\";\n});\nrequire.register('pages/artist/texter/view-model', function(require, exports, module) {var request = require('data-request');\nvar utils = require('dm-utils');\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        this.lyrics = ko.observableArray();\n        self.selected = ko.observable();\n        self.allTexts = ko.observable('');\n        self.editMode = ko.observable(false);\n        request.getTxt('lyrics', function (allTexts) {\n            self.allTexts(allTexts);\n            var items = utils.parseTextToItems(allTexts);\n            items.forEach(self.newLyricsItem.bind(self));\n            self.lyrics(items);\n        });\n\n    },\n    newLyricsItem: function (item) {\n        item.selected = ko.observable(false);\n        var self = this;\n        item.click = function () {\n            if (item.selected()) {\n                item.selected(false);\n            } else {\n                self.lyrics().forEach(function (item) {\n                    item.selected(false);\n                });\n                item.selected(true);\n            }\n        };\n    }\n}\n;\n});\nrequire.register('pages/artist/video/template', function(require, exports, module) {module.exports = \"<iframe-list params=\\\"items:videos, playIconClass: 'youtube'\\\"></iframe-list>\";\n});\nrequire.register('pages/artist/video/view-model', function(require, exports, module) {var request = require('utils/request');\nvar dataRequest = require('data-request');\nvar apiKey = 'AIzaSyBKplqq_V9dmIO1y8oD73kaj5rwnRSS_d4';\n\n\nmodule.exports = {\n    init: function () {\n        var self = this;\n        this.videos = ko.observableArray();\n        dataRequest.getJson('video-artist', function (ids) {\n            var videos = ids.map(function (id) {\n                var video = {\n                    id: id,\n                    iFrameUrl: 'https://www.youtube.com/embed/' + id + '?autoplay=1&autohide=1&origin=http://davidmiles.se',\n                    image: 'url(http://i.ytimg.com/vi/' + id + '/mqdefault.jpg)',\n                    title: ko.observable(),\n                    width: '320px',\n                    height: '180px',\n                    fill: true\n                };\n                request('GET', 'https://www.googleapis.com/youtube/v3/videos?key=' + apiKey +\n                    '&fields=items(snippet(title))&part=snippet&id=' + video.id).end(function (result) {\n                    video.title(result.body.items[0].snippet.title);\n                });\n                return video;\n            });\n            self.videos(videos);\n        });\n    }\n};\n\n});\nrequire.register('pages/trubadur/bilder/template', function(require, exports, module) {module.exports = \"<gallery params=\\\"jsonName: 'bilder-trubadur'\\\"></gallery>\";\n});\nrequire.register('pages/trubadur/bilder/view-model', function(require, exports, module) {module.exports = {\n    init: function () {\n    }\n};\n\n});\nrequire.register('pages/trubadur/info/template', function(require, exports, module) {module.exports = \"Här ska det finnas text om trubaduren\";\n});\nrequire.register('pages/trubadur/info/view-model', function(require, exports, module) {var request = require('data-request');\n\nmodule.exports = {\n    init: function () {\n\n    }\n};\n});\nrequire.register('pages/trubadur/referenser/template', function(require, exports, module) {module.exports = \"<div horizontal center-justified layout wrap data-bind=\\\"foreach: references\\\"><div vertical layout class=\\\"quote\\\"><div data-bind=\\\"text:text\\\" class=\\\"quoteText\\\"></div><div data-bind=\\\"text:id\\\" class=\\\"quoteSource\\\"></div></div></div>\";\n});\nrequire.register('pages/trubadur/referenser/view-model', function(require, exports, module) {var request = require('data-request');\nvar utils = require('dm-utils');\n\nmodule.exports = {\n    init: function () {\n        this.references = ko.observableArray();\n        var self = this;\n        self.referencesString = ko.observable('');\n        request.getTxt('referenser', function (referencesString) {\n            self.referencesString(referencesString);\n            var items = utils.parseTextToItems(referencesString);\n            items.forEach(function(item) {\n                item.text = '”' + item.text + '”';\n            });\n            self.references(items);\n        }.bind(this));\n    }\n};\n});\nrequire.register('pages/trubadur/video/template', function(require, exports, module) {module.exports = \"<div vertical layout>Här kommer det snart finnas videor från Davids trubadurgig...</div>\";\n});\nrequire.register('pages/trubadur/video/view-model', function(require, exports, module) {module.exports = {\n    init: function () {\n\n    }\n};\n});\nwindow.cogwheels.addFeature({name: \"pages\", version: \"0.0.0\"});"],"sourceRoot":"/source/"}